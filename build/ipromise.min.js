!function(t){function n(t,n,e){i(n)&&t._FCallbacks.push(n),i(e)&&t._RCallbacks.push(e)}function e(t){var n=typeof t;return!t||"object"!==n&&"function"!==n||"function"!=typeof t.then?!1:t.then}function c(t,n){if(t===n)o(t,new TypeError("The promise and its value refer to the same object."));else if(n&&n.constructor===a)n._state===s?n.then(function(n){c(t,n)},function(n){o(t,n)}):n._state===r?u(t,n._value):n._state===f&&o(t,n._value);else{var l=!1;try{var i=e(n);i?i.call(n,function(n){l||c(t,n),l=!0},function(n){l||o(t,n),l=!0}):u(t,n)}catch(h){l||o(t,h)}}}function u(t,n){t._state===s&&(t._state=r,t._value=n,setTimeout(function(){for(var e=0,c=t._FCallbacks.length;c>e;++e)t._FCallbacks[e].call(null,n);t._FCallbacks.splice(0)},0))}function o(t,n){t._state===s&&(t._state=f,t._value=n,setTimeout(function(){for(var e=0,c=t._RCallbacks.length;c>e;++e)t._RCallbacks[e].call(null,n);t._RCallbacks.splice(0)},0))}function a(t){this._state=s,this._value=null,this._FCallbacks=[],this._RCallbacks=[];var n=this;try{t(function(t){c(n,t)},function(t){o(n,t)})}catch(e){o(n,e)}}var l=Object.prototype.toString,i=function(t){return"[object Function]"===l.call(t)},r=1,f=2,s=0,h=a.prototype;h.then=function(t,e){var c=this;return new a(function(u,o){n(c,function(n){if(i(t))try{u(t(n))}catch(e){o(e)}else u(n)},function(t){if(i(e))try{u(e(t))}catch(n){o(n)}else o(t)})})},h["catch"]=function(t){return this.then(null,t)},a.resolve=function(t){return new a(function(n,e){n(t)})},a.reject=function(t){return new a(function(n,e){e(t)})},a.all=function(t){for(var n=[],e=a.resolve(null),c=0,u=t.length;u>c;++c){var o=t[c];e=e.then(function(){return o}).then(function(t){n.push(t)})}return e.then(function(){return n})},a.race=function(t){return new a(function(n,e){for(var c=!0,u=0,o=t.length;o>u;++u){var a=t[u];a.then(function(t){c&&(c=!1,n(t))},function(t){c&&(c=!1,e(t))})}})},t.iPromise=a}(window);
//# sourceMappingURL=ipromise.min.js.map